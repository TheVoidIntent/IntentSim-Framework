(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{6840:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(6389)}])},6389:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return _app}});var s=r(5893),l=r(7294);r(415);let n=new class{register(e){if(this.modules.has(e.id)){console.warn("Module ".concat(e.id," is already registered"));return}if(this.modules.set(e.id,e),this.loadedModules.set(e.id,!1),this.settings.set(e.id,new Map),e.getSettings){let t=e.getSettings();t.forEach(t=>{this.setSetting(e.id,t.id,t.defaultValue)})}}async load(e){if(!this.modules.has(e))return console.error("Module ".concat(e," is not registered")),!1;if(this.loadedModules.get(e))return!0;let t=this.modules.get(e);try{return await t.initialize(),t.registerComponents({registerVisualizationLayer:(t,r)=>this.visualizationLayers.set("".concat(e,".").concat(t),r),registerMetricPanel:(t,r)=>this.metricPanels.set("".concat(e,".").concat(t),r),registerControlPanel:(t,r)=>this.controlPanels.set("".concat(e,".").concat(t),r),registerNodeType:(t,r)=>this.nodeTypes.set("".concat(e,".").concat(t),r)}),t.registerMetrics({registerMetric:(t,r)=>this.metrics.set("".concat(e,".").concat(t),r),registerMetricGroup:(t,r)=>this.metricGroups.set("".concat(e,".").concat(t),r)}),this.loadedModules.set(e,!0),!0}catch(t){return console.error("Failed to load module ".concat(e,":"),t),this.moduleErrors.set(e,t),!1}}async unload(e){if(!this.modules.has(e))return console.error("Module ".concat(e," is not registered")),!1;if(!this.loadedModules.get(e))return!0;let t=this.modules.get(e);try{return t.cleanup&&await t.cleanup(),this.removeModuleComponents(e),this.loadedModules.set(e,!1),!0}catch(t){return console.error("Failed to unload module ".concat(e,":"),t),!1}}removeModuleComponents(e){let t="".concat(e,".");for(let e of Array.from(this.visualizationLayers.keys()))e.startsWith(t)&&this.visualizationLayers.delete(e);for(let e of Array.from(this.metricPanels.keys()))e.startsWith(t)&&this.metricPanels.delete(e);for(let e of Array.from(this.controlPanels.keys()))e.startsWith(t)&&this.controlPanels.delete(e);for(let e of Array.from(this.nodeTypes.keys()))e.startsWith(t)&&this.nodeTypes.delete(e);for(let e of Array.from(this.metrics.keys()))e.startsWith(t)&&this.metrics.delete(e);for(let e of Array.from(this.metricGroups.keys()))e.startsWith(t)&&this.metricGroups.delete(e)}getModules(){return Array.from(this.modules.values())}getLoadedModules(){return Array.from(this.modules.values()).filter(e=>this.loadedModules.get(e.id))}isLoaded(e){return this.loadedModules.get(e)||!1}getModule(e){return this.modules.get(e)||null}getModuleError(e){return this.moduleErrors.get(e)||null}getVisualizationLayers(){return this.visualizationLayers}getMetricPanels(){return this.metricPanels}getControlPanels(){return this.controlPanels}getNodeTypes(){return this.nodeTypes}getMetrics(){return this.metrics}getSetting(e,t){let r=this.settings.get(e);return r?r.get(t):null}setSetting(e,t,r){let s=this.settings.get(e);s&&s.set(t,r)}notifyFieldUpdate(e){for(let t of this.getLoadedModules())try{t.onFieldUpdate&&t.onFieldUpdate(e)}catch(e){console.error("Error in module ".concat(t.id," field update handler:"),e)}}constructor(){this.modules=new Map,this.loadedModules=new Map,this.moduleErrors=new Map,this.visualizationLayers=new Map,this.metricPanels=new Map,this.controlPanels=new Map,this.nodeTypes=new Map,this.metrics=new Map,this.metricGroups=new Map,this.settings=new Map}},a=(0,l.createContext)(n),useModuleRegistry=()=>(0,l.useContext)(a);var components_ExampleMetricPanel=e=>{let{fieldState:t}=e,r=useModuleRegistry(),l=r.getSetting("example","enabled");if(!l)return null;let n=t.nodes.filter(e=>"example"===e.type),a=n.length,o=n.length>0?n.reduce((e,t)=>e+t.influence,0)/n.length:0;return(0,s.jsxs)("div",{className:"bg-purple-900/30 p-4 rounded-lg border border-purple-800/50",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"text-sm text-purple-400 mb-2",children:"Example Module Metrics"}),(0,s.jsx)("div",{className:"px-2 py-1 rounded bg-purple-900/50 text-purple-400 text-xs",children:"Active"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[(0,s.jsxs)("div",{className:"bg-gray-800/50 p-2 rounded",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Example Nodes"}),(0,s.jsx)("div",{className:"text-lg font-medium text-purple-300",children:a})]}),(0,s.jsxs)("div",{className:"bg-gray-800/50 p-2 rounded",children:[(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"Avg. Influence"}),(0,s.jsx)("div",{className:"text-lg font-medium text-purple-300",children:o.toFixed(2)})]})]}),(0,s.jsx)("div",{className:"mt-2 text-xs text-purple-400/70 italic",children:"Example module demonstrating custom metrics"})]})},components_ExampleVisualizationLayer=e=>{let{canvas:t,fieldState:r}=e,s=useModuleRegistry(),n=s.getSetting("example","enabled"),a=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!t||!n)return;if(!a.current){var e;let r=document.createElement("canvas");r.width=t.width,r.height=t.height,r.style.position="absolute",r.style.top="0",r.style.left="0",r.style.pointerEvents="none",r.style.zIndex="10",null===(e=t.parentElement)||void 0===e||e.appendChild(r),a.current=r}let s=a.current;s.width=t.width,s.height=t.height;let l=s.getContext("2d");if(!l)return;l.clearRect(0,0,s.width,s.height);let o=Date.now()/1e3,i=r.nodes.filter(e=>"example"===e.type);l.strokeStyle="rgba(255, 0, 255, 0.3)",l.lineWidth=2;for(let e=0;e<i.length;e++)for(let r=e+1;r<i.length;r++){let s=i[e],n=i[r],a=s.x*t.width/100,d=s.y*t.height/100,c=n.x*t.width/100,u=n.y*t.height/100,h=Math.sqrt(Math.pow(c-a,2)+Math.pow(u-d,2));if(h<t.width/4){let t=.3+.2*Math.sin(2*o+e*r);l.strokeStyle="rgba(255, 0, 255, ".concat(t,")"),l.beginPath(),l.moveTo(a,d),l.lineTo(c,u),l.stroke()}}for(let e of i){let r=e.x*t.width/100,s=e.y*t.height/100,n=e.radius*(t.width/200),a=1+.3*Math.sin(3*o+e.id),i=4*n*a,d=l.createRadialGradient(r,s,n,r,s,i);d.addColorStop(0,"rgba(255, 0, 255, 0.4)"),d.addColorStop(1,"rgba(255, 0, 255, 0)"),l.fillStyle=d,l.beginPath(),l.arc(r,s,i,0,2*Math.PI),l.fill()}return()=>{a.current&&!n&&(a.current.remove(),a.current=null)}},[t,r,n]),null},components_ExampleControlPanel=e=>{let{fieldState:t,updateField:r}=e,l=useModuleRegistry(),n=l.getSetting("example","enabled"),a=l.getSetting("example","nodeCount"),o=l.getSetting("example","nodeColor");if(!n)return null;let i=t.nodes.filter(e=>"example"===e.type),d=i.length;return(0,s.jsxs)("div",{className:"mt-4 bg-gray-800 rounded-lg p-4 border border-purple-800/30",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-purple-400",children:"Example Module Controls"}),(0,s.jsxs)("div",{className:"relative inline-block w-10 align-middle select-none",children:[(0,s.jsx)("input",{type:"checkbox",id:"exampleEnabled",checked:n,onChange:()=>{l.setSetting("example","enabled",!n)},className:"sr-only"}),(0,s.jsx)("label",{htmlFor:"exampleEnabled",className:"block overflow-hidden h-5 rounded-full cursor-pointer transition-colors duration-200 ease-in-out ".concat(n?"bg-purple-500":"bg-gray-600"),children:(0,s.jsx)("span",{className:"block h-5 w-5 rounded-full bg-white shadow transform transition-transform duration-200 ease-in-out ".concat(n?"translate-x-5":"translate-x-0")})})]})]}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"text-xs text-gray-400 mb-1",children:["Example Nodes: ",d,"/",a]}),(0,s.jsxs)("div",{className:"flex space-x-2 mt-2",children:[(0,s.jsx)("button",{onClick:()=>{r(e=>{let t={type:"example",x:100*Math.random(),y:100*Math.random(),vx:(Math.random()-.5)*.1,vy:(Math.random()-.5)*.1,radius:3+1*Math.random(),color:o,baseInfluence:1,influence:1,id:"example_".concat(Date.now(),"_").concat(Math.floor(1e3*Math.random()))},r=[],s=Math.min(3,e.nodes.length);for(let t=0;t<s;t++){let t=Math.floor(Math.random()*e.nodes.length);r.push({source:e.nodes.length,target:t,strength:.3+.4*Math.random()})}return{...e,nodes:[...e.nodes,t],connections:[...e.connections,...r]}})},disabled:d>=a,className:"px-3 py-1 rounded text-xs font-medium ".concat(d>=a?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-purple-700 text-white hover:bg-purple-600"),children:"Add Node"}),(0,s.jsx)("button",{onClick:()=>{r(e=>{let t=e.nodes.map((e,t)=>"example"===e.type?t:-1).filter(e=>-1!==e),r=e.nodes.filter(e=>"example"!==e.type),s=e.connections.filter(e=>!t.includes(e.source)&&!t.includes(e.target));return{...e,nodes:r,connections:s}})},disabled:0===d,className:"px-3 py-1 rounded text-xs font-medium ".concat(0===d?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-purple-900 text-white hover:bg-purple-800"),children:"Remove All"})]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Node Limit"}),(0,s.jsx)("input",{type:"range",min:"1",max:"10",step:"1",value:a,onChange:e=>l.setSetting("example","nodeCount",parseInt(e.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[(0,s.jsx)("span",{children:"1"}),(0,s.jsx)("span",{children:"5"}),(0,s.jsx)("span",{children:"10"})]})]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("label",{className:"text-xs text-gray-400 block mb-1",children:"Node Color"}),(0,s.jsxs)("select",{value:o,onChange:e=>l.setSetting("example","nodeColor",e.target.value),className:"w-full px-2 py-1 bg-gray-700 border border-gray-600 rounded text-sm text-white",children:[(0,s.jsx)("option",{value:"magenta",children:"Magenta"}),(0,s.jsx)("option",{value:"cyan",children:"Cyan"}),(0,s.jsx)("option",{value:"yellow",children:"Yellow"})]})]})]})]})};let o={type:"example",render:(e,t)=>{let{x:r,y:s,radius:l}=e;t.fillStyle="rgba(255, 0, 255, 0.7)",t.beginPath(),t.arc(r,s,1.2*l,0,2*Math.PI),t.fill(),t.strokeStyle="white",t.lineWidth=2,t.beginPath(),t.moveTo(r-l/2,s),t.lineTo(r+l/2,s),t.moveTo(r,s-l/2),t.lineTo(r,s+l/2),t.stroke()},behavior:(e,t)=>{let r=Date.now()/1e3,s=.5+.5*Math.sin(r+e.id);e.influence=e.baseInfluence*s},create:e=>({type:"example",x:e.x||100*Math.random(),y:e.y||100*Math.random(),radius:e.radius||3,color:e.color||"magenta",baseInfluence:e.influence||1,influence:e.influence||1,id:"example_".concat(Date.now(),"_").concat(Math.floor(1e3*Math.random()))})},i={calculate:e=>{let t=e.nodes.filter(e=>"example"===e.type);return t.length},format:e=>"".concat(e," nodes"),thresholds:{low:2,high:5}};n.register({id:"example",name:"Example Module",description:"A simple example module for demonstration",version:"1.0.0",author:"IntentSim Team",initialize:async()=>{console.log("Example module initialized")},registerComponents:e=>{e.registerVisualizationLayer("layer",components_ExampleVisualizationLayer),e.registerMetricPanel("metrics",components_ExampleMetricPanel),e.registerControlPanel("controls",components_ExampleControlPanel),e.registerNodeType("special",o)},registerMetrics:e=>{e.registerMetric("nodeCount",i),e.registerMetricGroup("exampleMetrics",["example.nodeCount"])},cleanup:async()=>{console.log("Example module cleaning up")},onFieldUpdate:e=>{let t=e.nodes.filter(e=>"example"===e.type);console.log("Field update: ".concat(t.length," example nodes"))},getSettings:()=>[{id:"enabled",type:"boolean",label:"Enable Example Features",defaultValue:!0},{id:"nodeCount",type:"number",label:"Number of Example Nodes",defaultValue:3},{id:"nodeColor",type:"select",label:"Node Color",defaultValue:"magenta",options:[{value:"magenta",label:"Magenta"},{value:"cyan",label:"Cyan"},{value:"yellow",label:"Yellow"}]}]});var components_ModuleManager=e=>{let{children:t}=e,[r,o]=(0,l.useState)({}),[i,d]=(0,l.useState)(!1),[c,u]=(0,l.useState)({});return((0,l.useEffect)(()=>{let initializeModules=async()=>{let e=n.getModules(),t={},r={};for(let s of e)try{let e=await n.load(s.id);if(t[s.id]=e,!e){let e=n.getModuleError(s.id);e&&(r[s.id]=e.message)}}catch(e){t[s.id]=!1,r[s.id]=e.message}o(t),u(r),d(!0)};return initializeModules(),()=>{let e=n.getModules();for(let t of e)n.unload(t.id)}},[]),i)?(0,s.jsxs)(a.Provider,{value:n,children:[t,(0,s.jsx)(()=>{let[e,t]=(0,l.useState)(!1),a=n.getModules();return 0===a.length?null:(0,s.jsxs)("div",{className:"fixed bottom-4 right-4 z-30",children:[(0,s.jsx)("button",{onClick:()=>t(!e),className:"bg-gray-800 text-white p-2 rounded-full shadow-lg flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),e&&(0,s.jsxs)("div",{className:"absolute bottom-12 right-0 bg-gray-900 rounded-lg shadow-xl border border-gray-700 p-4 w-80",children:[(0,s.jsx)("h3",{className:"text-white text-sm font-bold mb-2",children:"Dashboard Modules"}),(0,s.jsx)("div",{className:"max-h-80 overflow-y-auto",children:a.map(e=>(0,s.jsxs)("div",{className:"mb-2 border-b border-gray-800 pb-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-white text-sm",children:e.name}),(0,s.jsx)("div",{className:"text-gray-400 text-xs",children:e.description})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full mr-2 ".concat(r[e.id]?"bg-green-500":"bg-red-500")}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:e.version})]})]}),c[e.id]&&(0,s.jsxs)("div",{className:"mt-1 text-xs text-red-400",children:["Error: ",c[e.id]]})]},e.id))})]})]})},{})]}):(0,s.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-intent-light"})})};let d=(0,l.createContext)(null),c={didCatch:!1,error:null};let ErrorBoundary=class ErrorBoundary extends l.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=c}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(null!==e){for(var t,r,s=arguments.length,l=Array(s),n=0;n<s;n++)l[n]=arguments[n];null===(t=(r=this.props).onReset)||void 0===t||t.call(r,{args:l,reason:"imperative-api"}),this.setState(c)}}componentDidCatch(e,t){var r,s;null===(r=(s=this.props).onError)||void 0===r||r.call(s,e,t)}componentDidUpdate(e,t){let{didCatch:r}=this.state,{resetKeys:s}=this.props;if(r&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,r)=>!Object.is(e,t[r]))}(e.resetKeys,s)){var l,n;null===(l=(n=this.props).onReset)||void 0===l||l.call(n,{next:s,prev:e.resetKeys,reason:"keys"}),this.setState(c)}}render(){let{children:e,fallbackRender:t,FallbackComponent:r,fallback:s}=this.props,{didCatch:n,error:a}=this.state,o=e;if(n){let e={error:a,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)o=t(e);else if(r)o=(0,l.createElement)(r,e);else if(void 0!==s)o=s;else throw a}return(0,l.createElement)(d.Provider,{value:{didCatch:n,error:a,resetErrorBoundary:this.resetErrorBoundary}},o)}};function ErrorFallback(e){let{error:t}=e;return(0,s.jsxs)("div",{className:"bg-red-900/20 border border-red-800 p-4 rounded-lg m-4 text-white",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Something went wrong:"}),(0,s.jsx)("pre",{className:"text-red-300 text-sm overflow-auto p-2 bg-black/30 rounded",children:t.message}),(0,s.jsx)("p",{className:"mt-4 text-sm",children:"Please reload the page or try again later."})]})}var _app=function(e){let{Component:t,pageProps:r}=e;return(0,s.jsx)(ErrorBoundary,{FallbackComponent:ErrorFallback,children:(0,s.jsx)(components_ModuleManager,{children:(0,s.jsx)(t,{...r})})})}},415:function(){}},function(e){var __webpack_exec__=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return __webpack_exec__(6840),__webpack_exec__(9974)}),_N_E=e.O()}]);